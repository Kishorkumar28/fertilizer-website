<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAP - Grow Better. Naturally.</title>
    <meta name="description" content="Premium eco-friendly fertilizers for better crop yields and sustainable farming practices">
    
    <!-- Resource hints for performance -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="preconnect" href="https://code.jquery.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    
    <!-- DNS prefetch for third party resources -->
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://code.jquery.com">
    <link rel="dns-prefetch" href="https://unpkg.com">
    
    <!-- Preload critical assets -->
    <link rel="preload" href="video/Home/GPWBG.webm" as="video" type="video/webm" fetchpriority="high">
    <link rel="preload" href="image/Home/menotre_notice1.png" as="image" fetchpriority="high">
    <link rel="preload" href="css/styles.css" as="style">
    <link rel="preload" href="css/colors.css" as="style">
    <link rel="preload" href="image/Logo/logo.png" as="image" fetchpriority="high">
    
    <!-- 
    NOTE: Tailwind CDN is for development only. 
    For production, replace with a proper build:
    1. Install via npm: npm install -D tailwindcss
    2. Initialize: npx tailwindcss init
    3. Build CSS: npx tailwindcss -i input.css -o output.css
    Learn more: https://tailwindcss.com/docs/installation
    -->
    <script src="https://cdn.tailwindcss.com" defer></script>
    
    <!-- jQuery (if needed) -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" defer></script>
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
    
    <!-- Custom CSS & JS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/colors.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/homepage.css">
    <!-- Link to extracted page-specific styles -->
    <link rel="stylesheet" href="css/page-specific.css">

    <script src="js/tailwind-config.js" defer></script>
    <script src="js/modern-effects.js" defer></script>

    <!-- Removed inline <style> blocks -->
    <!-- Removed inline <script> blocks for AOS init, memory optimization, image loading optimization -->
    
</head>
<body class="font-sans antialiased">
    <!-- Navbar -->
    <nav class="fixed top-0 left-0 right-0 bg-white shadow-md z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <a href="index.html" id="navbar-logo">
                    <div class="text-2xl font-bold text-brand-primary flex items-center">
                        <img src="image/Logo/logo.png" alt="MAP logo" class="h-8 mr-2 object-contain" width="32" height="32" fetchpriority="high" decoding="async" style="aspect-ratio: auto;"> <!-- Style attribute kept -->
                        <span class="logo-text"><span class="logo-m">M</span><span class="logo-a">A</span><span class="logo-p">P</span></span>
                    </div>
                </a>
                
                <!-- Navigation Links - Desktop -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="index.html" class="text-brand-primary font-medium transition-colors px-2 py-1 border-b-2 border-brand-primary">Home</a>
                    <a href="products.html" class="text-gray-700 hover:text-brand-primary font-medium transition-colors px-2 py-1 border-b-2 border-transparent hover:border-brand-primary">Products</a>
                    <a href="gallery.html" class="text-gray-700 hover:text-brand-primary font-medium transition-colors px-2 py-1 border-b-2 border-transparent hover:border-brand-primary">Gallery</a>
                    <a href="blog.html" class="text-gray-700 hover:text-brand-primary font-medium transition-colors px-2 py-1 border-b-2 border-transparent hover:border-brand-primary">Blog</a>
                    <!-- <a href="add-testimonial.html" class="text-gray-700 hover:text-brand-primary font-medium transition-colors px-2 py-1 border-b-2 border-transparent hover:border-brand-primary">Add Testimonial</a> -->
                    <a href="contact.html" class="bg-brand-primary text-white px-6 py-2 rounded-full hover:bg-brand-dark transition-colors shadow-sm hover:shadow-md ml-2">Contact Us</a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-button" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu" class="md:hidden text-gray-700 p-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-brand-primary/50">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" aria-hidden="true" class="md:hidden overflow-hidden transition-all duration-300 ease-in-out opacity-0 max-h-0">
                <div class="py-3 space-y-3 border-t border-gray-200">
                    <a href="index.html" class="block py-2 px-4 text-gray-700 hover:text-brand-primary hover:bg-gray-50 rounded-md transition-colors">Home</a>
                    <a href="products.html" class="block py-2 px-4 text-gray-700 hover:text-brand-primary hover:bg-gray-50 rounded-md transition-colors">Products</a>
                    <a href="gallery.html" class="block py-2 px-4 text-gray-700 hover:text-brand-primary hover:bg-gray-50 rounded-md transition-colors">Gallery</a>
                    <a href="blog.html" class="block py-2 px-4 text-gray-700 hover:text-brand-primary hover:bg-gray-50 rounded-md transition-colors">Blog</a>
                    <!-- <a href="add-testimonial.html" class="block py-2 px-4 text-gray-700 hover:text-brand-primary hover:bg-gray-50 rounded-md transition-colors">Add Testimonial</a> -->
                    <a href="contact.html" class="block py-2 px-4 text-brand-primary hover:text-white hover:bg-brand-primary rounded-md transition-colors mt-2 border border-brand-primary">Contact Us</a>
                </div>
            </div>
        </div>
    </nav>

    <main class="pt-16">  <!-- 👈 Add this to push the content below the fixed navbar -->
        
    </main>

    <!-- Hero Section -->
    <section class="pt-32 md:pt-20 pb-16 md:pb-24 bg-[#0d1f17] relative overflow-hidden">
        <!-- Background Video -->
        <div class="absolute inset-0 w-full h-full z-0 overflow-hidden">
            <!-- Random animated blur circles -->
            <div class="absolute inset-0 z-1 overflow-hidden pointer-events-none">
                <!-- Large circles -->
                <div class="absolute w-[500px] h-[500px] bg-brand-primary/20 rounded-full -top-[100px] -left-[200px] blur-[100px] animate-float" style="animation-duration: 25s; animation-delay: 0s;"></div> <!-- Style attribute kept -->
                <div class="absolute w-[400px] h-[400px] bg-brand-secondary/15 rounded-full bottom-[10%] -right-[100px] blur-[80px] animate-float" style="animation-duration: 20s; animation-delay: 2s;"></div> <!-- Style attribute kept -->
                <div class="absolute w-[300px] h-[300px] bg-[#d4af37]/10 rounded-full top-[30%] right-[20%] blur-[60px] animate-float" style="animation-duration: 18s; animation-delay: 5s;"></div> <!-- Style attribute kept -->
                
                <!-- Medium circles -->
                <div class="absolute w-[250px] h-[250px] bg-brand-accent/10 rounded-full top-[60%] left-[15%] blur-[50px] animate-float" style="animation-duration: 22s; animation-delay: 1s;"></div> <!-- Style attribute kept -->
                <div class="absolute w-[220px] h-[220px] bg-green-500/15 rounded-full top-[20%] left-[30%] blur-[45px] animate-float" style="animation-duration: 19s; animation-delay: 3s;"></div> <!-- Style attribute kept -->
                
                <!-- Small circles -->
                <div class="absolute w-[150px] h-[150px] bg-brand-primary/15 rounded-full bottom-[30%] right-[40%] blur-[30px] animate-float" style="animation-duration: 15s; animation-delay: 4s;"></div> <!-- Style attribute kept -->
                <div class="absolute w-[100px] h-[100px] bg-[#d4af37]/10 rounded-full top-[45%] left-[40%] blur-[20px] animate-float" style="animation-duration: 12s; animation-delay: 6s;"></div> <!-- Style attribute kept -->
            </div>
            
            <!-- Premium overlay gradients -->
            <div class="absolute inset-0 bg-gradient-to-r from-[#081810]/80 via-transparent to-[#081810]/80 z-1"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-[#0d1f17] via-[#0d1f17]/30 to-[#081810]/70 z-1"></div>
            
            <!-- Video on top with higher z-index -->
            <div class="absolute inset-0 z-2 opacity-100">
                <video id="hero-video" 
                       autoplay 
                       muted 
                       loop 
                       playsinline 
                       preload="metadata"
                       class="absolute min-w-full min-h-full object-cover w-auto h-auto opacity-100 transition-all duration-1000 scale-125 -translate-y-30 md:translate-x-16 translate-x-0 transform-gpu"
                       style="will-change: transform; backface-visibility: hidden;"
                       data-video-optimized="true">
                    <source src="video/Home/GPWBG.webm" type="video/webm">
                    <!-- Fallback content --> <!-- Style attribute kept -->
                    <div class="absolute inset-0 bg-gradient-to-r from-[#081810]/80 via-transparent to-[#081810]/80"></div>
            </video>
        </div>
        
            <!-- Removed inline script for video loading optimization -->
        </div>
        
        <!-- Premium decorative elements -->
        <div class="absolute inset-0 z-10 pointer-events-none overflow-hidden">
            <!-- Subtle light rays -->
            <div class="absolute top-0 left-1/4 w-64 h-[1000px] bg-gradient-to-b from-[#d4af37]/5 to-transparent rotate-[25deg] transform-gpu"></div>
            <div class="absolute top-0 right-1/3 w-96 h-[800px] bg-gradient-to-b from-[#d4af37]/3 to-transparent rotate-[-15deg] transform-gpu"></div>
            
            <!-- Reduced animated particles -->
            <div class="absolute top-1/4 left-1/4 w-2 h-2 rounded-full bg-[#d4af37]/40 animate-float" style="animation-duration: 20s;"></div> <!-- Style attribute kept -->
            <div class="absolute bottom-1/4 left-1/3 w-2 h-2 rounded-full bg-[#d4af37]/40 animate-float" style="animation-duration: 20s;"></div> <!-- Style attribute kept -->
            
            <!-- Golden accent lines -->
            <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#d4af37]/40 to-transparent"></div>
            <div class="absolute bottom-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#d4af37]/40 to-transparent"></div>
        </div>
        
        <div class="container mx-auto px-4 relative z-20">
            <!-- Content Area -->
            <div class="flex flex-col md:flex-row items-center justify-between gap-8 md:gap-16">
                <div class="w-full lg:w-1/2 order-1 relative z-10" data-aos="fade-right">
                    <!-- Premium logo presentation -->
                    <div class="mb-6 relative">
                        <h1 class="animate-on-scroll text-3xl md:text-5xl lg:text-6xl font-extrabold text-white leading-tight">
                            <div class="flex flex-wrap items-center">
                                <span class="text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.6)] tracking-wider">
                                    MENTORE AGRO
                                </span>
                            </div>
                            <div class="mt-1">
                                <span class="text-[#2ea12e] drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] tracking-wider">
                                    PRODUCTS
                                </span>
                            </div>
            </h1>
                    </div>
                    
                    <!-- Premium divider -->
                    <div class="flex items-center mb-6 overflow-hidden relative pt-2.5" id="icon-container">
                        <div class="h-0.5 bg-gradient-to-r from-[#d4af37]/10 to-[#d4af37]/50 flex-grow"></div>
                        <div class="flex space-x-10 px-3 relative">
                            <!-- Water drop icon -->
                            <div class="w-8 h-8 bg-black/30 backdrop-filter backdrop-blur-sm rounded-full flex items-center justify-center animate-bounce shadow-[0_0_10px_rgba(46,161,46,0.3)]" style="animation-duration: 3s;"> <!-- Style attribute kept -->
                                <svg class="w-5 h-5 text-blue-400" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                                </svg>
                            </div>

                            <!-- Animated plant icon -->
                            <div class="w-8 h-8 bg-black/30 backdrop-filter backdrop-blur-sm rounded-full flex items-center justify-center animate-pulse shadow-[0_0_10px_rgba(46,161,46,0.3)]" style="animation-duration: 2s;"> <!-- Style attribute kept -->
                                <svg class="w-5 h-5 text-green-400" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2a10 10 0 0 0-6.88 2.77A11.93 11.93 0 0 0 5 17v4a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1H8v-3a4 4 0 0 1 4-4 4 4 0 0 1 4 4v3h-1.5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1H18a1 1 0 0 0 1-1v-4c0-5.08-.25-8.86-2.43-11.95A8 8 0 0 0 12 2z"/>
                                </svg>
                            </div>
                            
                            <!-- Sun icon -->
                            <div class="w-8 h-8 bg-black/30 backdrop-filter backdrop-blur-sm rounded-full flex items-center justify-center animate-spin shadow-[0_0_10px_rgba(46,161,46,0.3)]" style="animation-duration: 8s;"> <!-- Style attribute kept -->
                                <svg class="w-5 h-5 text-yellow-400" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-6a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0V4a1 1 0 0 1 1-1zm0 16a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0v-1a1 1 0 0 1 1-1zM4 12a1 1 0 0 1-1-1 1 1 0 0 1 1-1h1a1 1 0 0 1 0 2H4zm16 0a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2h-1zM6.34 17.66a1 1 0 0 1-1.42-1.42l.71-.7a1 1 0 0 1 1.42 1.4l-.71.72zm12.02-12.02a1 1 0 0 1-1.42-1.42l.71-.7a1 1 0 0 1 1.42 1.4l-.71.72zm0 12.02-.71-.72a1 1 0 0 1 1.42-1.4l.7.7a1 1 0 0 1-1.41 1.42zM6.34 6.34 5.64 5.64a1 1 0 0 1 1.41-1.42l.71.71a1 1 0 0 1-1.42 1.41z"/>
                                </svg>
                            </div>
                        </div>
                        <div class="h-0.5 bg-gradient-to-l from-[#d4af37]/10 to-[#d4af37]/50 flex-grow"></div>
                    </div>
                    
                    <!-- Feature highlights with animated dots -->
                    <div class="grid grid-cols-2 gap-4 mb-8 backdrop-filter backdrop-blur-lg p-5 rounded-lg border border-white/10 bg-gradient-to-br from-white/10 to-transparent shadow-[0_8px_30px_rgb(0,0,0,0.12)]">
                        <div class="flex items-start space-x-2">
                            <div class="relative mt-1">
                                <div class="w-3 h-3 bg-brand-primary rounded-full absolute animate-ping opacity-75"></div>
                                <div class="w-3 h-3 bg-brand-primary rounded-full relative"></div>
                            </div>
                            <p class="text-sm md:text-base text-white">Sustainable Agricultural Solutions</p>
                        </div>
                        <div class="flex items-start space-x-2">
                            <div class="relative mt-1">
                                <div class="w-3 h-3 bg-brand-accent rounded-full absolute animate-ping opacity-75"></div>
                                <div class="w-3 h-3 bg-brand-accent rounded-full relative"></div>
                            </div>
                            <p class="text-sm md:text-base text-white">Eco-friendly Formulations</p>
                        </div>
                        <div class="flex items-start space-x-2">
                            <div class="relative mt-1">
                                <div class="w-3 h-3 bg-brand-secondary rounded-full absolute animate-ping opacity-75"></div>
                                <div class="w-3 h-3 bg-brand-secondary rounded-full relative"></div>
                            </div>
                            <p class="text-sm md:text-base text-white">Improved Crop Yields</p>
                        </div>
                        <div class="flex items-start space-x-2">
                            <div class="relative mt-1">
                                <div class="w-3 h-3 bg-green-500 rounded-full absolute animate-ping opacity-75"></div>
                                <div class="w-3 h-3 bg-green-500 rounded-full relative"></div>
                            </div>
                            <p class="text-sm md:text-base text-white">Nutrient-rich Soil Support</p>
                        </div>
                    </div>
                    
                    <p class="text-base md:text-xl text-white mb-8 max-w-xl backdrop-filter backdrop-blur-lg p-5 rounded-lg border border-white/10 bg-gradient-to-br from-white/10 to-transparent shadow-[0_8px_30px_rgb(0,0,0,0.12)] leading-relaxed tracking-wide text-justify">
                        <span class="font-medium">Empowering farmers</span> in <span class="text-green-300 font-medium">South India</span> through <span class="text-brand-accent font-semibold">sustainable agriculture</span>. We provide <span class="text-yellow-300 font-medium">quality farming inputs</span> that improve <span class="text-blue-300 font-medium">economic scalability</span> and promote <span class="text-green-400 font-semibold">sustainable farming practices</span> in rural communities.
                    </p>

                    <div class="flex flex-wrap gap-4">
                        <a href="products.html" class="magnetic-button glow-on-hover bg-gradient-to-r from-brand-primary to-brand-dark text-white px-8 py-3 rounded-full hover:shadow-lg transition-all duration-300 hover:scale-105 flex items-center shadow-[0_4px_14px_0_rgba(46,161,46,0.39)] hover:text-white">
                            Explore Products
                            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                            </svg>
                        </a>
                        <a href="contact.html" class="magnetic-button border-2 border-white text-white bg-transparent backdrop-filter backdrop-blur-sm px-8 py-3 rounded-full hover:bg-[#2ea12e] hover:border-[#2ea12e] hover:text-white transition-all duration-300 hover:shadow-lg flex items-center shadow-[0_4px_6px_-1px_rgba(255,255,255,0.1),0_2px_4px_-1px_rgba(255,255,255,0.06)]">
                            Book Now
                        </a>
                    </div>
                </div>

                <!-- Desktop Image -->
                <div class="w-full lg:w-1/2 mt-8 lg:mt-0 hidden md:block order-2" data-aos="fade-left">
                    <div class="relative mx-auto max-w-md lg:max-w-full">
                        <div class="relative">
                            <!-- Remove animated circles background div -->
                            
                            <!-- Image with no effects -->
                            <div class="flex justify-end pr-0">
                            <img src="image/Home/menotre_notice1.png" 
                                 alt="Sustainable Farming" 
                                    class="relative w-2/3 h-auto max-h-[400px] object-contain object-center transition-all duration-700 hover:scale-105 animate-float" 
                                    loading="lazy"
                                    width="400" 
                                    height="350">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stats Area -->
            
            <div class="mt-12 md:mt-16 grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6">
                <div class="backdrop-filter backdrop-blur-lg p-4 rounded-lg border border-white/10 bg-gradient-to-br from-white/10 to-transparent shadow-[0_8px_30px_rgb(0,0,0,0.12)] text-center transition-transform hover:scale-105 duration-300" data-aos="fade-up" data-aos-delay="0">
                    <h3 class="text-xl md:text-2xl font-bold text-green-400 mb-1">
                        <span class="stat-counter" data-target="20" data-suffix="+">0</span>
                    </h3>
                    <p class="text-xs md:text-sm text-white">Product varieties</p>
                </div>
                <div class="backdrop-filter backdrop-blur-lg p-4 rounded-lg border border-white/10 bg-gradient-to-br from-white/10 to-transparent shadow-[0_8px_30px_rgb(0,0,0,0.12)] text-center transition-transform hover:scale-105 duration-300" data-aos="fade-up" data-aos-delay="100">
                    <h3 class="text-xl md:text-2xl font-bold text-green-400 mb-1">
                        <span class="stat-counter" data-target="10" data-suffix=" k+">0</span>
                    </h3>
                    <p class="text-xs md:text-sm text-white">Happy farmers</p>
                </div>
                <div class="backdrop-filter backdrop-blur-lg p-4 rounded-lg border border-white/10 bg-gradient-to-br from-white/10 to-transparent shadow-[0_8px_30px_rgb(0,0,0,0.12)] text-center transition-transform hover:scale-105 duration-300" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="text-xl md:text-2xl font-bold text-green-400 mb-1">
                        <span class="stat-counter" data-target="98" data-suffix="%">0</span>
                    </h3>
                    <p class="text-xs md:text-sm text-white">Satisfaction rate</p>
                </div>
                <div class="backdrop-filter backdrop-blur-lg p-4 rounded-lg border border-white/10 bg-gradient-to-br from-white/10 to-transparent shadow-[0_8px_30px_rgb(0,0,0,0.12)] text-center transition-transform hover:scale-105 duration-300" data-aos="fade-up" data-aos-delay="300">
                    <h3 class="text-xl md:text-2xl font-bold text-green-400 mb-1">
                        <span class="stat-counter" data-target="35" data-suffix="%">0</span>
                    </h3>
                    <p class="text-xs md:text-sm text-white">Yield increase</p>
                </div>
            </div>
           
        </div>
    </section>

    <!-- Objection Busters Section -->
    <section class="py-16 bg-gradient-to-r from-brand-light/30 to-white relative overflow-hidden with-shapes" data-shape-count="5">
        <!-- Animated background elements -->
        <div class="absolute -top-10 -right-10 w-40 h-40 bg-brand-light rounded-full opacity-40 animate-pulse"></div>
        <div class="absolute bottom-10 left-10 w-32 h-32 bg-brand-accent rounded-full opacity-30 animate-pulse" style="animation-duration: 3s;"></div> <!-- Style attribute kept -->
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center mb-12" data-aos="fade-up">
                <span class="inline-block px-3 py-1 bg-green-100 text-green-600 rounded-full text-sm font-semibold">Why Choose Us</span>
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mt-4 mb-4">Our Key Advantages</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Discover why farmers trust our fertilizers for their agricultural success.
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Objection Buster 1 -->
                <div class="bg-white rounded-xl shadow-lg p-6 transform transition-all duration-300 hover:shadow-xl hover:scale-105" data-aos="fade-up" data-aos-delay="100">
                    <div class="flex items-center mb-4">
                        <div class="bg-brand-primary/10 p-3 rounded-full mr-4">
                            <svg class="w-6 h-6 text-brand-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Quality & Innovation</h3>
                    </div>
                    <p class="text-gray-600">
                        Our fertilizers are developed using cutting-edge agricultural science, ensuring superior quality and innovative formulations that maximize crop yields.
                    </p>
                </div>
                
                <!-- Objection Buster 2 -->
                <div class="bg-white rounded-xl shadow-lg p-6 transform transition-all duration-300 hover:shadow-xl hover:scale-105" data-aos="fade-up" data-aos-delay="200">
                    <div class="flex items-center mb-4">
                        <div class="bg-brand-primary/10 p-3 rounded-full mr-4">
                            <svg class="w-6 h-6 text-brand-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Value & Results</h3>
                    </div>
                    <p class="text-gray-600">
                        Experience significant improvements in crop yields and soil health, providing excellent return on investment for farmers.
                    </p>
                </div>
                
                <!-- Objection Buster 3 -->
                <div class="bg-white rounded-xl shadow-lg p-6 transform transition-all duration-300 hover:shadow-xl hover:scale-105" data-aos="fade-up" data-aos-delay="300">
                    <div class="flex items-center mb-4">
                        <div class="bg-brand-primary/10 p-3 rounded-full mr-4">
                            <svg class="w-6 h-6 text-brand-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Expert Support</h3>
                    </div>
                    <p class="text-gray-600">
                        Access to agricultural experts who provide personalized guidance and support for optimal fertilizer application and crop management.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Vision & Mission Section -->
    <section id="vision-mission" class="py-16 content-visibility-auto">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold mb-6 mt-4 relative" data-aos="fade-up">
                    <span class="relative inline-block">
                        <span class="text-[#1e293b] tracking-tight">Our Vision & Mission</span>
                    </span>
                </h2>
                <p class="text-gray-600 max-w-3xl mx-auto leading-relaxed font-medium" data-aos="fade-up" data-aos-delay="100">
                    Cultivating agricultural excellence through innovative solutions that empower farmers to achieve sustainable growth and prosperity.
            </p>
        </div>

            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div data-aos="fade-right" data-aos-delay="200" data-aos-duration="600" class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 will-change-transform">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 relative inline-block">
                        Sustainable Agriculture
                        <div class="w-24 h-1 bg-green-500 rounded-full mt-2"></div>
                    </h3>
                    <p class="text-gray-600 mb-8 leading-relaxed">
                    Our team of agricultural scientists works tirelessly to develop fertilizer formulations 
                    that not only increase yields but also improve long-term soil health and reduce environmental impact.
                    </p>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="counter-container flex flex-col items-center mb-6">
                            <div class="text-4xl font-bold optimize-text text-green-600">5+</div>
                            <div class="text-gray-700 mt-2 optimize-text">Years of Excellence</div>
                        </div>
                        <div class="counter-container flex flex-col items-center mb-6">
                            <div class="text-4xl font-bold optimize-text text-green-600">10k+</div>
                            <div class="text-gray-700 mt-2 optimize-text">Farmers Empowered</div>
                        </div>
                    </div>
                </div>
                <div class="relative" data-aos="fade-left" data-aos-delay="150" data-aos-duration="600">
                    <!-- Simplified frame with fewer layers -->
                    <div class="absolute -inset-4 bg-brand-light/30 rounded-3xl z-0"></div>
                    
                    <!-- Premium image container with optimized styling -->
                    <div class="relative overflow-hidden rounded-2xl shadow-lg w-5/6 mx-auto border border-white/50">
                        <!-- Reduced decorative elements -->
                        <div class="absolute top-0 left-0 w-12 h-12 border-t-2 border-l-2 border-brand-primary/50 rounded-tl-lg"></div>
                        <div class="absolute bottom-0 right-0 w-12 h-12 border-b-2 border-r-2 border-brand-primary/50 rounded-br-lg"></div>
                
                <img src="image/Home/Sustainable_Agriculture.jpg" 
                     alt="Sustainable Farming Practices" 
                     width="600" height="350"
                     loading="lazy"
                     decoding="async"
                     fetchpriority="low"
                     class="relative w-full h-[350px] object-cover object-center rounded-2xl"
                     onerror="this.onerror=null; this.src='image/Home/south_india.png'; console.log('Mission image fallback loaded');">
                        
                        <!-- Simplified gradient overlay -->
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-900/50 to-transparent"></div>
                        
                        <!-- Image caption -->
                        <div class="absolute bottom-4 left-0 right-0 text-center">
                            <span class="px-4 py-2 bg-white/80 rounded-full text-sm font-medium text-gray-800 shadow">
                                Sustainable Farming Practices
                            </span>
                        </div>
                    </div>
                    
                    <!-- Simpler badge -->
                    <div class="absolute -bottom-2 -right-2 bg-brand-primary text-white rounded-full p-3 shadow">
                        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-20 bg-gradient-to-r from-brand-light/30 to-white relative overflow-hidden with-shapes" data-shape-count="5">
        <!-- Animated background elements -->
        <div class="absolute -top-10 -right-10 w-40 h-40 bg-brand-light rounded-full opacity-40 animate-pulse"></div>
        <div class="absolute bottom-10 left-10 w-32 h-32 bg-brand-accent rounded-full opacity-30 animate-pulse" style="animation-duration: 3s;"></div> <!-- Style attribute kept -->
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center mb-16">
                <span class="inline-block px-3 py-1 bg-green-100 text-green-600 rounded-full text-sm font-semibold">Featured Products</span>
                <h2 class="text-4xl font-bold text-gray-800 mb-4" data-aos="fade-up">Our Premium Products</h2>
                <p class="text-gray-600 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                    Explore our featured premium fertilizers designed to enhance your crop yield while maintaining soil health.
                </p>
            </div>
            <div class="grid md:grid-cols-3 gap-8" id="featured-products">
                <!-- Product cards here -->
            </div>
            <div class="text-center mt-12" data-aos="fade-up" data-aos-delay="300">
                <a href="products.html" class="bg-brand-primary text-white px-8 py-3 rounded-full hover:bg-brand-dark transition-colors inline-flex items-center transform hover:scale-105 duration-300 shadow-md glow-on-hover">
                    <span>All Products</span>
                    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <!-- Gallery Preview Section -->
    <section id="gallery-preview" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-800 mb-4" data-aos="fade-up">Gallery</h2>
                <p class="text-gray-600 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                    See the impact of our fertilizers in action. Browse our gallery of before/after crop photos, production facilities, and application techniques.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="featured-gallery">
                <!-- Gallery images will be dynamically loaded -->
            </div>
            
            <div class="text-center mt-12" data-aos="fade-up">
                <a href="gallery.html" class="bg-brand-primary text-white px-8 py-3 rounded-full hover:bg-brand-dark transition-colors inline-flex items-center glow-on-hover">
                    <span>View Full Gallery</span>
                    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="py-12 bg-gradient-to-r from-brand-light/30 to-white relative overflow-hidden with-shapes" data-shape-count="5">
        <!-- Animated background elements -->
        <div class="absolute -top-10 -right-10 w-40 h-40 bg-brand-light rounded-full opacity-40 animate-pulse"></div>
        <div class="absolute bottom-10 left-10 w-32 h-32 bg-brand-accent rounded-full opacity-30 animate-pulse" style="animation-duration: 3s;"></div> <!-- Style attribute kept -->
        
        <div class="container mx-auto px-4">
            <div class="text-center mb-4">
                <span class="inline-block px-3 py-1 bg-green-100 text-green-600 rounded-full text-sm font-semibold">Success Stories</span>
            </div>
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-gray-800 mb-4" data-aos="fade-up">What Our Customers Say</h2>
                <p class="text-gray-600 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                    Don't just take our word for it. Hear from farmers who have transformed their crops and increased their yields with GrowRich fertilizers.
                </p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <!-- Testimonial Card -->
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform transition-all duration-500 hover:shadow-2xl" data-aos="zoom-in">
                    <div class="p-6 md:p-8 relative">
                        <!-- Quote icon -->
                        <div class="absolute top-4 right-4 text-brand-light">
                            <svg class="w-20 h-20 opacity-20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                            </svg>
                        </div>
                        
                        <div class="flex items-center mb-4">
                            <div class="w-16 h-16 rounded-full bg-gradient-to-r from-brand-primary to-brand-secondary flex items-center justify-center text-white text-2xl font-bold mr-4 shadow-md">
                                <span id="testimonial-initials"></span>
                            </div>
                            <div>
                                <h4 id="testimonial-name" class="font-bold text-gray-800 text-xl"><!-- Name will be added dynamically --></h4>
                                <div class="text-sm text-gray-500 flex flex-wrap">
                                    <span id="testimonial-occupation" class="font-medium"><!-- Occupation will be added dynamically --></span>
                                    <span class="mx-2 text-gray-300">•</span>
                                    <span id="testimonial-location" class="text-gray-500"><!-- Location will be added dynamically --></span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="testimonial-stars" class="flex mb-4 text-yellow-400">
                            <!-- Stars will be added dynamically -->
                        </div>
                        
                        <blockquote id="testimonial-text" class="text-gray-700 text-lg leading-relaxed italic mb-6">
                            <!-- Testimonial text will be added dynamically -->
                        </blockquote>
                        
                        <div class="flex items-center">
                            <div class="inline-block px-3 py-1 bg-brand-primary text-white rounded-full text-sm font-medium">
                                <span id="testimonial-crop-type" class="font-bold"><!-- Crop type will be added dynamically --></span> Farmer
                            </div>
                            <div class="inline-block ml-4 px-3 py-1 bg-gray-100 text-gray-500 rounded-full text-sm">
                                <span id="testimonial-date" class="font-bold"><!-- Date will be added dynamically --></span>
                    </div>
                </div>
                    </div>
                </div>
            
                <!-- Testimonial Navigation -->
                <div class="flex justify-between items-center mt-6 px-4">
                    <button id="prev-testimonial" class="bg-brand-primary text-white p-3 rounded-full shadow-xl hover:bg-brand-dark transition-all duration-300 transform hover:scale-110 focus:outline-none group">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                        </button>
                    
                    <!-- Testimonial Indicators -->
                    <div id="testimonial-indicators" class="flex space-x-3">
                        <!-- Indicators will be added dynamically -->
                    </div>
                    
                    <button id="next-testimonial" class="bg-brand-primary text-white p-3 rounded-full shadow-xl hover:bg-brand-dark transition-all duration-300 transform hover:scale-110 focus:outline-none group">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Service Area & Hours Section -->
    <section class="py-20 bg-gradient-to-b from-gray-50 to-brand-light/20 relative overflow-hidden">
        <!-- Subtle decorative elements -->
        <div class="absolute top-0 left-0 w-64 h-64 bg-brand-primary/5 rounded-full blur-3xl opacity-50"></div>
        <div class="absolute bottom-0 right-0 w-80 h-80 bg-brand-secondary/5 rounded-full blur-3xl opacity-50"></div>
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Our Reach & Availability</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Find our service area coverage and operating hours below.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-12 items-stretch">
                <!-- Service Area Map -->
                <div class="relative" data-aos="fade-right">
                    <div class="bg-white/80 backdrop-blur-md rounded-2xl shadow-lg overflow-hidden h-full flex flex-col border border-white/20 transform transition-all duration-500 hover:shadow-xl">
                        <!-- Map Container -->
                        <div class="relative flex-grow">
                            <img src="image/Home/south_india.png" 
                                 alt="Service Area Map" 
                                 class="w-full h-full object-cover"> <!-- Removed opacity-80 -->
                            
                            <!-- Softer Gradient Overlay -->
                            <div class="absolute inset-0 bg-gradient-to-t from-gray-900/70 via-gray-900/30 to-transparent"></div>
                            
                            <!-- Map Content -->
                            <div class="absolute inset-0 p-6 md:p-8 flex flex-col justify-end">
                                <div class="bg-black/20 backdrop-blur-sm rounded-xl p-6 border border-white/10">
                                    <h3 class="text-2xl md:text-3xl font-bold text-white mb-4 text-shadow-md">Our Service Coverage</h3>
                                    <p class="text-gray-100 text-base md:text-lg mb-4">Serving farmers across South India with quality agricultural solutions</p>
                                    
                                    <!-- Service Areas List -->
                                    <div class="grid grid-cols-2 gap-x-6 gap-y-3 mt-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-brand-primary rounded-full animate-pulse shadow-sm"></div>
                                            <span class="text-white text-sm md:text-base">Tamil Nadu</span>
                            </div>
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-brand-secondary rounded-full animate-pulse shadow-sm"></div>
                                            <span class="text-white text-sm md:text-base">Karnataka</span>
                            </div>
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-brand-accent rounded-full animate-pulse shadow-sm"></div>
                                            <span class="text-white text-sm md:text-base">Kerala</span>
                        </div>
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-sm"></div>
                                            <span class="text-white text-sm md:text-base">Andhra Pradesh</span>
                        </div>
                                    </div>
                            </div>
                        </div>
                        
                            <!-- Decorative Elements (Kept as is, seems fine) -->
                            <div class="absolute top-4 right-4 bg-brand-primary/40 backdrop-blur-sm rounded-full p-2 shadow-lg">
                                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                        </div>
                            </div>
                        </div>
                    </div>
                    
                <!-- Business Hours -->
                <div class="bg-white/80 backdrop-blur-md rounded-2xl shadow-xl p-6 md:p-8 h-full flex flex-col border border-white/30 transform transition-all duration-500 hover:shadow-2xl" data-aos="fade-left">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Business Hours</h3>
                    <div class="space-y-3 flex-grow">
                        <div class="flex justify-between items-center p-4 bg-white/70 rounded-lg border border-gray-200/50">
                            <span class="font-semibold text-gray-700">Monday - Friday</span>
                            <span class="text-brand-primary font-medium">8:00 AM - 6:00 PM</span>
                            </div>
                        <div class="flex justify-between items-center p-4 bg-white/70 rounded-lg border border-gray-200/50">
                            <span class="font-semibold text-gray-700">Saturday</span>
                            <span class="text-brand-primary font-medium">9:00 AM - 4:00 PM</span>
                            </div>
                        <div class="flex justify-between items-center p-4 bg-white/70 rounded-lg border border-gray-200/50">
                            <span class="font-semibold text-gray-700">Sunday</span>
                            <span class="text-gray-500">Closed</span>
                    </div>
                </div>
                
                    <div class="mt-6 pt-6 border-t border-gray-200/80">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Emergency Support</h4>
                        <p class="text-gray-600 mb-4 text-sm">For urgent agricultural assistance, contact our 24/7 support line:</p>
                        <a href="tel:+1234567890" class="inline-flex items-center text-brand-primary hover:text-brand-dark font-medium transition-colors group">
                            <svg class="w-5 h-5 mr-2 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                            <span>+91 91234 56789</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Simple Footer -->
    <footer class="bg-gray-100 border-t border-gray-200">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="md:col-span-2">
                    <a href="index.html" class="inline-flex items-center mb-4">
                        <img src="image/Logo/logo.png" 
                             alt="MAP logo" 
                             class="h-8 mr-2 object-contain" 
                             width="32" height="32" 
                             decoding="async" 
                             style="aspect-ratio: auto;"
                             onerror="this.onerror=null; this.style.display='none'; console.log('Logo fallback activated');">
                        <span class="text-xl font-bold text-gray-800 logo-text">
                            <span class="logo-m">M</span><span class="logo-a">A</span><span class="logo-p">P</span>
                        </span>
                    </a>
                    <p class="text-gray-600 mb-4">Providing sustainable and eco-friendly fertilizer solutions for better crop yield and healthier soil.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-brand-primary">
                            <span class="sr-only">Facebook</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" clip-rule="evenodd" />
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-brand-primary">
                            <span class="sr-only">Instagram</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.359.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-brand-primary">
                            <span class="sr-only">Twitter</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" />
                            </svg>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4">Products</h3>
                    <ul class="space-y-2">
                        <li><a href="products.html" class="text-gray-600 hover:text-brand-primary">All Products</a></li>
                        <li><a href="products.html?category=organic" class="text-gray-600 hover:text-brand-primary">Organic Fertilizers</a></li>
                        <li><a href="products.html?category=mineral" class="text-gray-600 hover:text-brand-primary">Mineral Fertilizers</a></li>
                        <li><a href="products.html?category=bio" class="text-gray-600 hover:text-brand-primary">Bio Fertilizers</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4">Contact</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <svg class="h-5 w-5 text-brand-primary mt-0.5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            <span class="text-gray-600">Mentore Agro Products Pvt. Ltd.
14/11 Lakshmipuram 2nd Street,
Ariyamangalam,
Trichy, TN 620010</span>
                        </li>
                        <li class="flex items-center">
                            <svg class="h-5 w-5 text-brand-primary mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                            <a href="mailto:info@fertilizer.map" class="text-gray-600 hover:text-brand-primary">info@fertilizer.map</a>
                        </li>
                        <li class="flex items-center">
                            <svg class="h-5 w-5 text-brand-primary mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                            <a href="tel:+1234567890" class="text-gray-600 hover:text-brand-primary">+91 91234 56789</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-200 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-500 text-sm">&copy; 2023 MAP Fertilizers. All rights reserved.</p>
                <div class="mt-4 md:mt-0">
                    <ul class="flex space-x-6">
                        <li><a href="#" class="text-gray-500 hover:text-brand-primary text-sm">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-500 hover:text-brand-primary text-sm">Terms of Service</a></li>
                        <li><a href="#" class="text-gray-500 hover:text-brand-primary text-sm">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>


    <!-- Scripts at the end of the body -->
    <script src="js/main.js" defer></script>
    <script src="js/data/products.js" defer></script>
    <script src="js/data/gallery.js" defer></script>
    <script src="js/data/testimonials.js"></script>
    
    <!-- Animation Initialization Script (placed after deferred scripts) -->
    <script>
        // Flag to track initializations
        window.appInitialized = window.appInitialized || {
            heroCounters: false,
            products: false,
            gallery: false
        };

        // Add preloading for mission section image
        document.addEventListener('DOMContentLoaded', function() {
            // Preload the sustainable agriculture image
            const missionImg = new Image();
            missionImg.src = 'image/Home/Sustainable_Agriculture.jpg';
            
            // Set a timeout to check if image is loaded
            setTimeout(() => {
                const missionSection = document.querySelector('#vision-mission img');
                if (missionSection && !missionImg.complete) {
                    console.log('Mission image taking too long to load, trying fallback');
                    missionSection.src = 'image/Home/south_india.png';
                }
            }, 3000); // 3 seconds timeout
            
            // Add handlers for vision-mission image
            const visionImage = document.querySelector('#vision-mission img');
            if (visionImage) {
                visionImage.onload = function() {
                    this.classList.add('image-loaded');
                    console.log('Mission image loaded successfully');
                };
            }
        });

        // Immediate counter initialization for stat counters in hero section
        function initHeroCounters() {
            if (window.appInitialized.heroCounters) return;
            window.appInitialized.heroCounters = true;

            document.querySelectorAll('.stat-counter').forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const suffix = counter.getAttribute('data-suffix') || '';
                
                // Animate the counter
                let startValue = 0;
                const duration = 2000; // 2 seconds
                const startTime = performance.now();
                
                function updateCounter(timestamp) {
                    const elapsed = timestamp - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Easing function for smoother animation
                    const easedProgress = progress < 0.5
                        ? 4 * progress * progress * progress
                        : 1 - Math.pow(-2 * progress + 2, 3) / 2;
                    
                    const currentValue = Math.floor(easedProgress * target);
                    counter.textContent = currentValue;
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = target;
                        counter.classList.add('animated', 'counter-finished');
                    }
                }
                
                requestAnimationFrame(updateCounter);
            });
        }

        // Safe initialize for products
        function safeInitProducts() {
            if (window.appInitialized.products) return;
            
            const productsContainer = document.getElementById('featured-products');
            if (!productsContainer) return;
            
            // Check if products were already loaded
            if (productsContainer.children.length > 0) {
                window.appInitialized.products = true;
                return;
            }
            
            // Only try to initialize if the function exists and container is empty
            if (typeof loadFeaturedProducts === 'function') {
                try {
                    loadFeaturedProducts();
                    window.appInitialized.products = true;
                } catch(e) {
                    console.log('Product initialization error:', e);
                }
            }
        }

        // Safe initialize for gallery
        function safeInitGallery() {
            if (window.appInitialized.gallery) return;
            
            const galleryContainer = document.getElementById('featured-gallery');
            if (!galleryContainer) return;
            
            // Check if gallery was already loaded
            if (galleryContainer.children.length > 0) {
                window.appInitialized.gallery = true;
                return;
            }
            
            // Only try to initialize if the function exists and container is empty
            if (typeof loadGalleryImages === 'function') {
                try {
                    loadGalleryImages();
                    window.appInitialized.gallery = true;
                } catch(e) {
                    console.log('Gallery initialization error:', e);
                }
            }
        }
        
        // Run immediately
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            setTimeout(initHeroCounters, 500);
        } else {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(initHeroCounters, 500);
            });
        }
        
        // Wait for both DOM and deferred scripts to be ready
        window.addEventListener('load', function() {
            // Make sure hero counters are initialized
            initHeroCounters();
            
            // Ensure counter initialization runs after everything is loaded
            if (typeof initCounters === 'function' && !window.countersInitialized) {
                window.countersInitialized = true;
                initCounters();
            } else if (!window.countersInitialized) {
                // Fallback counter initialization if the main function isn't available
                window.countersInitialized = true;
                setTimeout(function() {
                    // Manually initialize all counters
                    document.querySelectorAll('.counter, .stat-counter').forEach(counter => {
                        if (!counter.classList.contains('animated')) {
                            const target = parseInt(counter.getAttribute('data-target'));
                            const suffix = counter.getAttribute('data-suffix') || '';
                            counter.textContent = target;
                            counter.classList.add('animated', 'counter-finished');
                        }
                    });
                }, 1000);
            }
            
            // Ensure AOS animations are initialized
            if (typeof AOS !== 'undefined') {
                AOS.refresh();
            }
            
            // Safely initialize products and gallery after a short delay
            setTimeout(function() {
                safeInitProducts();
                safeInitGallery();
            }, 800);
        });

        // Final safety check - if products/gallery weren't loaded by now, try one more time
        setTimeout(function() {
            safeInitProducts();
            safeInitGallery();
        }, 3000);
    </script>
    
    <!-- Counter Animation Script -->
    <script>
        // Initialize number counters
        function initCounters() {
            // Add counter animation CSS
            const counterStyle = document.createElement('style');
            counterStyle.textContent = `
                @keyframes counterPulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }
                
                @keyframes counterGlow {
                    0% { text-shadow: 0 0 0px rgba(74, 222, 128, 0.4); }
                    50% { text-shadow: 0 0 10px rgba(74, 222, 128, 0.8); }
                    100% { text-shadow: 0 0 0px rgba(74, 222, 128, 0.4); }
                }
                
                .counter-finished {
                    animation: counterPulse 0.5s ease-in-out, counterGlow 1.5s ease-in-out;
                    color: currentColor;
                    transition: color 0.3s ease;
                }
                
                .counter {
                    display: inline-block;
                    position: relative;
                }
                
                .counter::after {
                    content: '';
                    position: absolute;
                    bottom: -3px;
                    left: 0;
                    width: 0;
                    height: 2px;
                    background-color: currentColor;
                    transition: width 2s ease-in-out;
                    box-shadow: 0 0 8px currentColor;
                }
                
                .counter.animated::after {
                    width: 100%;
                }
                
                .stat-counter {
                    position: relative;
                    display: inline-block;
                }
                
                .stat-counter::after {
                    content: attr(data-suffix);
                }
            `;
            document.head.appendChild(counterStyle);
            
            // Create an Intersection Observer for the counters
            const counterObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    // When counter elements come into view
                    if (entry.isIntersecting) {
                        const counters = entry.target.querySelectorAll('.counter, .stat-counter');
                        counters.forEach(counter => {
                            // Only animate if not already animated
                            if (!counter.classList.contains('animated')) {
                                const target = parseInt(counter.getAttribute('data-target'));
                                const suffix = counter.getAttribute('data-suffix') || '';
                                const duration = 2000; // animation duration in ms
                                const startTime = Date.now();
                                
                                // Mark as animated to prevent re-animation
                                counter.classList.add('animated');
                                
                                const updateCounter = () => {
                                    const currentTime = Date.now();
                                    const elapsedTime = currentTime - startTime;
                                    
                                    if (elapsedTime < duration) {
                                        // Calculate the progress (0 to 1)
                                        const progress = elapsedTime / duration;
                                        
                                        // Use custom easing function for smoother animation
                                        // This easing starts slow, speeds up in the middle, and slows down at the end
                                        const easedProgress = progress < 0.5
                                            ? 4 * progress * progress * progress
                                            : 1 - Math.pow(-2 * progress + 2, 3) / 2;
                                        
                                        // Calculate the current count
                                        const currentCount = Math.floor(easedProgress * target);
                                        
                                        // Update the counter text (without suffix - moved to CSS)
                                        if (counter.classList.contains('stat-counter')) {
                                            counter.textContent = currentCount;
                                        } else {
                                            counter.textContent = currentCount;
                                        }
                                        
                                        // Continue animation
                                        requestAnimationFrame(updateCounter);
                                    } else {
                                        // Ensure final value is exact
                                        if (counter.classList.contains('stat-counter')) {
                                            counter.textContent = target;
                                        } else {
                                            counter.textContent = target;
                                        }
                                        
                                        // Add finished animation class
                                        counter.classList.add('counter-finished');
                                        
                                        // Add parent animation for better visual effect
                                        const parent = counter.parentElement;
                                        if (parent) {
                                            parent.classList.add('counter-parent-finished');
                                        }
                                    }
                                };
                                
                                // Start the animation
                                requestAnimationFrame(updateCounter);
                            }
                        });
                        
                        // Stop observing this element after animation starts
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.2 }); // Lower threshold to start animation earlier
            
            // Observe counter elements
            document.querySelectorAll('.counter, .stat-counter').forEach(counter => {
                // Find parent element to observe
                const container = counter.closest('[data-aos]') || counter.parentElement;
                if (container) {
                    counterObserver.observe(container);
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize counters with a slight delay to ensure page is rendered
            setTimeout(initCounters, 500);
        });
    </script>
    
    <script>
        // Function to load featured products
        function loadFeaturedProducts() {
            const featuredProducts = productsData.filter(product => product.featured).slice(0, 3);
            const productContainer = document.getElementById('featured-products');
            
            featuredProducts.forEach((product, index) => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-xl shadow-lg overflow-hidden product-card-hover animate-float-medium';
                productCard.setAttribute('data-aos', 'fade-up');
                productCard.style.animationDelay = `${index * 0.2}s`;
                
                productCard.innerHTML = `
                    <div class="h-48 overflow-hidden">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover transition-transform hover:scale-110 duration-500">
                    </div>
                    <div class="p-6">
                        <div class="flex items-start justify-between">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">${product.name}</h3>
                            <div class="bg-brand-light rounded-full p-1 animate-pulse-soft">
                                <svg class="w-4 h-4 text-brand-primary" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                        </div>
                        <p class="text-gray-600">${product.shortDescription || product.description}</p>
                        <div class="mt-4 flex items-center justify-between">
                            <span class="text-brand-primary font-bold">Contact for pricing</span>
                            <div class="flex items-center">
                                ${createStarRating(product.rating)}
                            </div>
                        </div>
                        <a href="product-details.html?product=${product.id}" class="mt-4 text-brand-primary font-semibold hover:text-brand-dark inline-flex items-center group">
                            Learn More 
                            <svg class="w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                            </svg>
                        </a>
                    </div>
                `;
                
                productContainer.appendChild(productCard);
            });
        }
        
        // Function to load gallery images
        function loadGalleryImages() {
            // Get 3 random featured images from the gallery data
            const galleryImages = [...galleryData]
                .sort(() => 0.5 - Math.random())
                .slice(0, 3);
                
            const galleryContainer = document.getElementById('featured-gallery');
            
            galleryImages.forEach((image, index) => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'overflow-hidden rounded-lg shadow-lg transform transition-all duration-500 hover:scale-105 hover:shadow-xl group';
                galleryItem.setAttribute('data-aos', 'fade-up');
                galleryItem.setAttribute('data-aos-delay', index * 100);
                galleryItem.style.animationDelay = `${index * 0.3}s`;
                
                galleryItem.innerHTML = `
                    <div class="relative overflow-hidden">
                        <img src="${image.fullImage}" alt="${image.title}" class="w-full h-64 object-cover transition-transform duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                            <span class="text-white text-sm font-medium px-4 py-2">${image.category}</span>
                        </div>
                    </div>
                    <div class="p-4 bg-white">
                        <h3 class="font-bold text-lg text-gray-800 group-hover:text-brand-primary transition-colors">${image.title}</h3>
                        <p class="text-sm text-gray-600">${image.description}</p>
                    </div>
                `;
                
                galleryContainer.appendChild(galleryItem);
            });
        }
        
        // Create star rating HTML
        function createStarRating(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<svg class="w-4 h-4 text-yellow-500 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>';
                } else {
                    stars += '<svg class="w-4 h-4 text-gray-300 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>';
                }
            }
            return stars;
        }
        
        // Load products and gallery images when the page is loaded
        document.addEventListener('DOMContentLoaded', function() {
            loadFeaturedProducts();
            loadGalleryImages();
        });

        // Testimonials Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Make sure the testimonials.js script has loaded and defined testimonialsData
            if (typeof testimonialsData === 'undefined') {
                console.warn('Testimonials data not loaded yet, creating fallback data');
                window.testimonialsData = [{
                    id: 'testimonial-fallback',
                    name: 'John Farmer',
                    occupation: 'Farm Owner',
                    location: 'Midwest, USA',
                    rating: 5,
                    text: 'Great fertilizer products that have helped my crops grow healthier and stronger. Highly recommended for all farmers.',
                    cropType: 'Mixed Crops',
                    date: '2023-12-01'
                }];
            } else {
                console.log("Testimonials data loaded:", testimonialsData);
            }
            
            // Check if testimonials array is empty
            if (!testimonialsData || testimonialsData.length === 0) {
                console.error("No testimonial data found!");
                // Fallback already created above
            }
            
            // Initialize testimonials
            let currentTestimonialIndex = 0;
            
            // Function to generate initials from name
            function getInitials(name) {
                return name.split(' ')
                    .map(word => word.charAt(0))
                    .join('')
                    .toUpperCase();
            }
            
            // Function to format date
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'short' };
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', options);
            }
            
            // Function to show testimonial by index
            function showTestimonial(index) {
                const testimonial = testimonialsData[index];
                
                // Update text content
                document.getElementById('testimonial-text').textContent = testimonial.text;
                document.getElementById('testimonial-name').textContent = testimonial.name;
                document.getElementById('testimonial-occupation').textContent = testimonial.occupation;
                document.getElementById('testimonial-location').textContent = testimonial.location;
                document.getElementById('testimonial-crop-type').textContent = testimonial.cropType;
                document.getElementById('testimonial-date').textContent = formatDate(testimonial.date);
                
                // Set user initials in the avatar
                document.getElementById('testimonial-initials').textContent = getInitials(testimonial.name);
                
                // Update stars - with new animated approach
                const starsContainer = document.getElementById('testimonial-stars');
                starsContainer.innerHTML = '';
                
                for (let i = 0; i < 5; i++) {
                    const starWrapper = document.createElement('div');
                    starWrapper.classList.add('transform', 'transition-all', 'duration-300');
                    
                    // Add a small delay for each star's animation
                    starWrapper.style.animationDelay = `${i * 0.1}s`;
                    
                    const starSvg = document.createElement('svg');
                    starSvg.classList.add('w-6', 'h-6', 'mx-0.5');
                    starSvg.setAttribute('fill', 'currentColor');
                    starSvg.setAttribute('viewBox', '0 0 20 20');
                    
                    const starPath = document.createElement('path');
                    starPath.setAttribute('d', 'M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.828 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z');
                    
                    starSvg.appendChild(starPath);
                    
                    // Apply appropriate color and animation based on rating
                    if (i < testimonial.rating) {
                        starSvg.classList.add('text-yellow-400');
                        // Add a pop-in animation with different delays
                        starWrapper.classList.add('animate-bounce');
                        starWrapper.style.animationDuration = '0.5s';
                        starWrapper.style.animationDelay = `${i * 0.1}s`;
                    } else {
                        starSvg.classList.add('text-gray-300');
                    }
                    
                    starWrapper.appendChild(starSvg);
                    starsContainer.appendChild(starWrapper);
                }
                
                // Update indicators
                const indicators = document.querySelectorAll('.testimonial-indicator');
                indicators.forEach((indicator, i) => {
                    if (i === index) {
                        indicator.classList.remove('bg-gray-300');
                        indicator.classList.remove('w-3');
                        indicator.classList.add('bg-brand-primary');
                        indicator.classList.add('w-8');
                    } else {
                        indicator.classList.remove('bg-brand-primary');
                        indicator.classList.remove('w-8');
                        indicator.classList.add('bg-gray-300');
                        indicator.classList.add('w-3');
                    }
                });
                
                currentTestimonialIndex = index;
                
                // Apply a fade-in animation to the entire testimonial
                const testimonialCard = document.querySelector('.bg-white.rounded-2xl');
                testimonialCard.classList.add('animate-fade-in');
                
                // Remove the animation class after it finishes to allow it to be re-applied
                setTimeout(() => {
                    testimonialCard.classList.remove('animate-fade-in');
                }, 1000);
            }
            
            // Create indicators
            const indicatorsContainer = document.getElementById('testimonial-indicators');
            testimonialsData.forEach((_, index) => {
                const indicator = document.createElement('button');
                indicator.classList.add('h-3', 'rounded-full', 'testimonial-indicator', 'transition-all', 'duration-300');
                if (index === 0) {
                    indicator.classList.add('bg-brand-primary');
                    indicator.classList.add('w-8');
                } else {
                    indicator.classList.add('bg-gray-300');
                    indicator.classList.add('w-3');
                }
                indicator.addEventListener('click', () => showTestimonial(index));
                indicatorsContainer.appendChild(indicator);
            });
            
            // Add event listeners for navigation
            document.getElementById('prev-testimonial').addEventListener('click', () => {
                let newIndex = currentTestimonialIndex - 1;
                if (newIndex < 0) newIndex = testimonialsData.length - 1;
                showTestimonial(newIndex);
            });
            
            document.getElementById('next-testimonial').addEventListener('click', () => {
                let newIndex = currentTestimonialIndex + 1;
                if (newIndex >= testimonialsData.length) newIndex = 0;
                showTestimonial(newIndex);
            });
            
            // Auto-rotate testimonials every 8 seconds
            let testimonialInterval = setInterval(() => {
                let newIndex = currentTestimonialIndex + 1;
                if (newIndex >= testimonialsData.length) newIndex = 0;
                showTestimonial(newIndex);
            }, 8000);
            
            // Stop auto-rotation when user interacts with testimonials
            document.querySelectorAll('#prev-testimonial, #next-testimonial, .testimonial-indicator').forEach(el => {
                el.addEventListener('click', () => {
                    clearInterval(testimonialInterval);
                });
            });
            
            // Initialize with first testimonial
            showTestimonial(0);
            
            // Add fade-in animation to CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in {
                    animation: fadeIn 0.5s ease-out forwards;
                }
            `;
            document.head.appendChild(style);
        });
    </script>

    <style>
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }

    .animate-float {
        animation: float 6s ease-in-out infinite;
    }
    </style>

    <!-- Initialize AOS -->
    <script>
        // This duplicate AOS initialization is causing the error - removing it
        /*
        // Find where AOS is initialized around line 1899 and add a check
        // ... existing code ...
        // Instead of directly calling AOS.init()
        if (typeof AOS !== 'undefined') {
        AOS.init({
            duration: 800,
                easing: 'ease-in-out',
                once: true
            });
                        } else {
            console.warn('AOS library not loaded');
        }
        // ... existing code ...
        */
    </script>

    <!-- Mobile menu toggle -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.toggle('open');
                    const expanded = mobileMenu.classList.contains('open');
                    mobileMenuBtn.setAttribute('aria-expanded', expanded);
                    mobileMenu.setAttribute('aria-hidden', !expanded);
                });
            }
        });
    </script>

    <!-- Logo Styling -->
    <script src="js/logo-styles.js"></script>

    <!-- Progressive Reveal Animation -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add reveal-on-scroll class to elements we want to animate
            const elementsToReveal = [
                ...document.querySelectorAll('#about p'),
                ...document.querySelectorAll('#products p'),
                ...document.querySelectorAll('#gallery-preview p'),
                ...document.querySelectorAll('#testimonials p'),
                ...document.querySelectorAll('#contact p')
            ];
            
            // Add the class to selected elements
            elementsToReveal.forEach((element, index) => {
                element.classList.add('reveal-on-scroll');
                // Add staggered delay for smoother reveal
                element.style.transitionDelay = `${index * 0.1}s`;
            });
            
            // Create intersection observer for reveal effect
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('revealed');
                        // Once revealed, no need to observe anymore
                        revealObserver.unobserve(entry.target);
                    }
                });
            }, { 
                threshold: 0.15,
                rootMargin: '0px 0px -50px 0px' // Trigger slightly before element comes into view
            });
            
            // Observe all elements with reveal-on-scroll class
            document.querySelectorAll('.reveal-on-scroll').forEach(element => {
                revealObserver.observe(element);
            });
            
            // Add animated dots to sections
            const addAnimatedDots = () => {
                const sections = [
                    document.querySelector('#about'),
                    document.querySelector('#products'),
                    document.querySelector('#gallery-preview'),
                    document.querySelector('#testimonials')
                ];
                
                sections.forEach(section => {
                    if (!section) return;
                    
                    // Create animated dots container
                    const dotsContainer = document.createElement('div');
                    dotsContainer.className = 'absolute top-0 right-0 w-full h-full overflow-hidden pointer-events-none z-0';
                    dotsContainer.style.opacity = '0.3';
                    section.style.position = 'relative';
                    
                    // Add random animated dots
                    for (let i = 0; i < 5; i++) {
                        const dot = document.createElement('div');
                        const size = Math.floor(Math.random() * 10) + 5; // 5-15px
                        const delay = Math.random() * 3;
                        const duration = Math.floor(Math.random() * 10) + 10; // 10-20s
                        
                        dot.className = 'rounded-full absolute';
                        dot.style.width = `${size}px`;
                        dot.style.height = `${size}px`;
                        dot.style.backgroundColor = i % 2 === 0 ? 'var(--color-brand-primary)' : 'var(--color-brand-secondary)';
                        dot.style.top = `${Math.random() * 100}%`;
                        dot.style.left = `${Math.random() * 100}%`;
                        dot.style.opacity = '0.3';
                        dot.style.animation = `float-slow ${duration}s ease-in-out infinite`;
                        dot.style.animationDelay = `${delay}s`;
                        
                        dotsContainer.appendChild(dot);
                    }
                    
                    section.appendChild(dotsContainer);
                });
            };
            
            // Call this function after a slight delay
            setTimeout(addAnimatedDots, 1000);
        });
    </script>

    <!-- Memory Optimization Script -->
    <script>
        // Memory optimization constants
        const MEMORY_CHECK_INTERVAL = 30000; // 30 seconds
        const MAX_MEMORY_THRESHOLD = 300; // MB
        const CLEANUP_THRESHOLD = 0.7; // 70% of max memory
        
        // Memory monitoring and cleanup
        const memoryManager = {
            checkInterval: 30000, // Check every 30 seconds
            maxMemoryThreshold: 300, // MB
            observers: new Set(),
            timeouts: new Set(),
            intervals: new Set(),
            lastMemoryCheck: 0,
            cleanupInProgress: false,
            
            init() {
                setInterval(() => this.checkMemory(), this.checkInterval);
                window.addEventListener('beforeunload', () => this.cleanup());
            },
            
            estimateMemoryUsage() {
                if (window.performance && window.performance.memory) {
                    return window.performance.memory.usedJSHeapSize / (1024 * 1024);
                }
                return 0;
            },
            
            checkMemory() {
                const currentTime = Date.now();
                if (currentTime - this.lastMemoryCheck < this.checkInterval) return;
                
                this.lastMemoryCheck = currentTime;
                const memoryUsage = this.estimateMemoryUsage();
                
                if (memoryUsage > this.maxMemoryThreshold) {
                    this.triggerCleanup();
                }
            },
            
            triggerCleanup() {
                if (this.cleanupInProgress) return;
                this.cleanupInProgress = true;
                
                try {
                    // Clean up video resources
                    const video = document.querySelector('#hero-video');
                    if (video) {
                        video.pause();
                        video.src = '';
                        video.load();
                    }
                    
                    // Clean up unused DOM elements
                    document.querySelectorAll('.hidden, [style*="display: none"]').forEach(el => {
                        if (!el.matches('#mobile-menu')) {
                            el.remove();
                        }
                    });
                    
                    // Clean up observers
                    this.observers.forEach(observer => observer.disconnect());
                    this.observers.clear();
                    
                    // Clean up timeouts and intervals
                    this.timeouts.forEach(clearTimeout);
                    this.intervals.forEach(clearInterval);
                    this.timeouts.clear();
                    this.intervals.clear();
                } catch (e) {
                    console.error('Memory cleanup error:', e);
                } finally {
                    this.cleanupInProgress = false;
                }
            },
            
            cleanup() {
                this.triggerCleanup();
                // Additional cleanup on page unload
                document.querySelectorAll('img').forEach(img => {
                    img.src = '';
                    img.removeAttribute('src');
                });
            }
        };
        
        // Initialize memory monitoring
        document.addEventListener('DOMContentLoaded', () => memoryManager.init());
    </script>

    <!-- Video Optimization Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const heroVideo = document.getElementById('hero-video');
            if (!heroVideo) return;

            // Video optimization settings
            const videoOptimization = {
                // VP9 specific optimizations
                vp9Settings: {
                    // Reduce decoding complexity
                    complexity: 2,
                    // Optimize for transparency
                    alphaQuality: 0.5,
                    // Reduce frame rate if possible
                    frameRate: 30
                },
                
                // Performance monitoring
                lastFrameTime: 0,
                frameDropCount: 0,
                maxFrameDrops: 5,
                
                // Initialize video optimization
                init() {
                    // Set initial video quality
                    this.setVideoQuality();
                    
                    // Monitor video performance
                    this.monitorPerformance();
                    
                    // Handle visibility changes
                    this.handleVisibility();
                    
                    // Handle memory management
                    this.handleMemory();
                },
                
                // Set video quality based on device capabilities
                setVideoQuality() {
                    // Check for VP9 support
                    const canPlayVP9 = heroVideo.canPlayType('video/webm; codecs="vp9"') === 'probably';
                    
                    if (canPlayVP9) {
                        // Apply VP9 specific optimizations
                        heroVideo.setAttribute('data-vp9-optimized', 'true');
                        
                        // Reduce video quality on mobile devices
                        if (window.innerWidth <= 768) {
                            heroVideo.playbackRate = 0.8;
                            heroVideo.setAttribute('data-quality', 'low');
                        } else {
                            heroVideo.playbackRate = 1.0;
                            heroVideo.setAttribute('data-quality', 'high');
                        }
                    }
                },
                
                // Monitor video performance
                monitorPerformance() {
                    let lastTime = performance.now();
                    let frameCount = 0;
                    
                    const checkPerformance = () => {
                        const currentTime = performance.now();
                        const elapsed = currentTime - lastTime;
                        
                        if (elapsed >= 1000) { // Check every second
                            const fps = frameCount;
                            frameCount = 0;
                            lastTime = currentTime;
                            
                            // Adjust quality based on FPS
                            if (fps < 24) {
                                this.reduceQuality();
                            } else if (fps > 30) {
                                this.increaseQuality();
                            }
                        }
                        
                        frameCount++;
                        requestAnimationFrame(checkPerformance);
                    };
                    
                    requestAnimationFrame(checkPerformance);
                },
                
                // Handle visibility changes
                handleVisibility() {
                    document.addEventListener('visibilitychange', () => {
                        if (document.hidden) {
                            heroVideo.pause();
                        } else {
                            heroVideo.play().catch(console.error);
                        }
                    });
                },
                
                // Handle memory management
                handleMemory() {
                    // Monitor memory usage
                    const memoryCheck = setInterval(() => {
                        if (window.performance && window.performance.memory) {
                            const memoryUsage = window.performance.memory.usedJSHeapSize / (1024 * 1024);
                            
                            if (memoryUsage > 200) { // If memory usage exceeds 200MB
                                this.reduceQuality();
                            }
                        }
                    }, 30000);
                    
                    // Clean up on page unload
                    window.addEventListener('beforeunload', () => {
                        clearInterval(memoryCheck);
                        heroVideo.pause();
                        heroVideo.src = '';
                        heroVideo.load();
                    });
                },
                
                // Reduce video quality
                reduceQuality() {
                    if (heroVideo.getAttribute('data-quality') !== 'low') {
                        heroVideo.playbackRate = 0.8;
                        heroVideo.setAttribute('data-quality', 'low');
                        
                        // Reduce video size
                        heroVideo.style.transform = 'scale(1)';
                    }
                },
                
                // Increase video quality
                increaseQuality() {
                    if (heroVideo.getAttribute('data-quality') !== 'high') {
                        heroVideo.playbackRate = 1.0;
                        heroVideo.setAttribute('data-quality', 'high');
                        
                        // Restore video size
                        heroVideo.style.transform = 'scale(1.25)';
                    }
                }
            };
            
            // Initialize video optimization
            videoOptimization.init();
            
            // Add error handling
            heroVideo.addEventListener('error', (e) => {
                console.error('Video error:', e);
                // Fallback to static background if video fails
                const videoContainer = heroVideo.parentElement;
                if (videoContainer) {
                    videoContainer.style.background = 'linear-gradient(to right, #0d1f17, #152a1e)';
                    heroVideo.style.display = 'none';
                }
            });
            
            // Optimize video loading
            heroVideo.addEventListener('loadedmetadata', () => {
                // Set initial playback rate
                heroVideo.playbackRate = 1.0;
                
                // Start with normal speed
                setTimeout(() => {
                    if (!heroVideo.paused) {
                        heroVideo.playbackRate = 0.5;
                    }
                }, 4000);
            });
        });
    </script>

    <style>
        /* Video optimization styles */
        #hero-video {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
            will-change: transform;
            contain: content;
        }
        
        /* Optimize video container */
        .video-container {
            transform: translateZ(0);
            will-change: transform;
            contain: content;
        }
        
        /* Reduce motion for users who prefer reduced motion */
        @media (prefers-reduced-motion: reduce) {
            #hero-video {
                animation: none !important;
                transition: none !important;
            }
        }
    </style>

    <!-- Add logo optimization script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Optimize logo images
            const logoImages = document.querySelectorAll('a[href="index.html"] img');
            logoImages.forEach(img => {
                // Ensure image loads properly
                img.onerror = function() {
                    console.warn('Logo image failed to load, using text fallback');
                    this.style.display = 'none';
                };
                
                // Add loading complete class for animations
                img.onload = function() {
                    this.classList.add('logo-loaded');
                    // Notify parent that image is loaded
                    this.closest('a').classList.add('logo-image-loaded');
                };
                
                // Set explicit dimensions
                if (!img.width || !img.height) {
                    img.width = 32;
                    img.height = 32;
                }
            });
        });
    </script>

    <!-- Add script to ensure Explore Products button keeps white text -->
    <script>
        // Ensure Explore Products button always has white text
        document.addEventListener('DOMContentLoaded', function() {
            const exploreButton = document.querySelector('a[href="products.html"].magnetic-button.glow-on-hover');
            
            if (exploreButton) {
                // Apply white text initially
                exploreButton.style.color = 'white';
                
                // Ensure it stays white on hover
                exploreButton.addEventListener('mouseenter', function() {
                    this.style.color = 'white';
                });
                
                exploreButton.addEventListener('mouseleave', function() {
                    this.style.color = 'white';
                });
                
                // Handle any dynamically added hover effects
                const observer = new MutationObserver(function(mutations) {
                    exploreButton.style.color = 'white';
                });
                
                // Use observer manager instead of direct observe call
                window.observerManager.addObserver(observer, exploreButton, { 
                    attributes: true,
                    attributeFilter: ['class', 'style']
                });
            }
        });
    </script>

    <!-- Add JavaScript to maintain white text on all green buttons -->
    <script>
        // Ensure green buttons maintain white text on hover
        document.addEventListener('DOMContentLoaded', function() {
            // Select all green buttons
            const greenButtons = document.querySelectorAll([
                '.bg-brand-primary', 
                '.bg-green-500',
                '.bg-green-600',
                '.bg-green-700',
                '.bg-green-800',
                '.bg-gradient-to-r.from-brand-primary',
                '[class*="bg-brand-"]',
                '[class*="bg-green-"]',
                '.magnetic-button.glow-on-hover',
                '.hover\\:bg-brand-primary',
                '.hover\\:bg-green-500',
                '.hover\\:bg-green-600'
            ].join(','));
            
            // Add style once instead of setting inline styles
            const style = document.createElement('style');
            style.textContent = `
                .forced-white-text,
                .forced-white-text:hover {
                    color: white !important;
                }
            `;
            document.head.appendChild(style);
            
            // Apply forced white text to all green buttons
            greenButtons.forEach(button => {
                // Set initial color using class instead of inline style
                if (button.classList.contains('bg-brand-primary') || 
                    button.classList.contains('bg-green-500') ||
                    button.classList.contains('bg-green-600') ||
                    button.classList.contains('bg-green-700') ||
                    button.classList.contains('bg-green-800') ||
                    button.classList.contains('bg-gradient-to-r') ||
                    button.classList.contains('glow-on-hover')) {
                    
                    button.classList.add('forced-white-text');
                    
                    // Use a single observer for each button, managed by observerManager
                    const observer = new MutationObserver(function() {
                        if (!button.classList.contains('forced-white-text')) {
                            button.classList.add('forced-white-text');
                        }
                    });
                    
                    window.observerManager.addObserver(observer, button, { 
                        attributes: true,
                        attributeFilter: ['class', 'style']
                    });
                }
            });
            
            // Set up a MutationObserver for the entire document to catch dynamically added buttons
            const bodyObserver = new MutationObserver(function(mutations) {
                mutations.forEach(mutation => {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(node => {
                            if (node.nodeType === 1) { // Element node
                                // Check if it's a button or contains buttons
                                const newButtons = node.classList && 
                                    (node.classList.contains('bg-brand-primary') || 
                                     node.classList.contains('bg-green-500') ||
                                     node.classList.contains('bg-green-600') ||
                                     node.classList.contains('glow-on-hover')) ? 
                                    [node] : 
                                    node.querySelectorAll('.bg-brand-primary, .bg-green-500, .bg-green-600, .glow-on-hover');
                                
                                if (newButtons && newButtons.length) {
                                    newButtons.forEach(button => {
                                        button.classList.add('forced-white-text');
                                    });
                                }
                            }
                        });
                    }
                });
            });
            
            // Observe only the most necessary parts of the DOM
            const mainContent = document.querySelector('main') || document.body;
            window.observerManager.addObserver(bodyObserver, mainContent, { 
                childList: true,
                subtree: true
            });
        });
    </script>

    <!-- Script to ensure consistent text color for Success Stories elements -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Find all section label elements (Success Stories, Featured Products, Why Choose Us)
            const sectionLabelElements = document.querySelectorAll('.text-green-600');
            
            // Define the sections to style consistently
            const sectionsToStyle = ['Success Stories', 'Featured Products', 'Why Choose Us'];
            
            // Convert to array to filter relevant section labels
            const filteredElements = Array.from(sectionLabelElements).filter(el => 
                sectionsToStyle.some(section => el.textContent.trim() === section || el.textContent.includes(section))
            );
            
            // Add global style to ensure consistent coloring
            const style = document.createElement('style');
            style.textContent = `
                .branded-section-label {
                    color: var(--brand-primary, #34a853) !important;
                }
                .branded-section-label:hover {
                    color: var(--brand-primary, #34a853) !important;
                }
            `;
            document.head.appendChild(style);
            
            // Set consistent text color for all targeted section labels
            filteredElements.forEach(element => {
                // Apply consistent styling
                element.classList.remove('text-green-600');
                element.classList.add('text-brand-primary');
                element.classList.add('branded-section-label');
                
                // Also update the background to match brand color scheme
                if (element.classList.contains('bg-green-100')) {
                    element.classList.remove('bg-green-100');
                    element.classList.add('bg-brand-light/30');
                }
            });
            
            // Use a single observer for all section labels to reduce memory usage
            const sectionsObserver = new MutationObserver(function(mutations) {
                mutations.forEach(mutation => {
                    const target = mutation.target;
                    if (sectionsToStyle.some(section => 
                        target.textContent.trim() === section || 
                        target.textContent.includes(section))) {
                        
                        // Ensure consistent styling is maintained
                        if (!target.classList.contains('branded-section-label')) {
                            target.classList.add('branded-section-label');
                            target.classList.add('text-brand-primary');
                        }
                        if (target.classList.contains('text-green-600')) {
                            target.classList.remove('text-green-600');
                        }
                    }
                });
            });
            
            // Observer for new section labels being added to the DOM
            const bodyObserver = new MutationObserver(function(mutations) {
                mutations.forEach(mutation => {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(node => {
                            if (node.nodeType === 1) { // Element node
                                const newLabels = node.querySelectorAll('.text-green-600');
                                newLabels.forEach(label => {
                                    if (sectionsToStyle.some(section => 
                                        label.textContent.trim() === section || 
                                        label.textContent.includes(section))) {
                                        
                                        label.classList.remove('text-green-600');
                                        label.classList.add('text-brand-primary');
                                        label.classList.add('branded-section-label');
                                    }
                                });
                            }
                        });
                    }
                });
            });
            
            // Register observers with the manager
            filteredElements.forEach(element => {
                window.observerManager.addObserver(sectionsObserver, element, { 
                    attributes: true,
                    characterData: true,
                    attributeFilter: ['class', 'style']
                });
            });
            
            // Only observe main content area to reduce overhead
            const mainContent = document.querySelector('main') || document.body;
            window.observerManager.addObserver(bodyObserver, mainContent, { 
                childList: true,
                subtree: true
            });
        });
    </script>

    <!-- Observer Management System to prevent memory leaks -->
    <script>
        // Create a global observer manager to track and clean up observers
        window.observerManager = {
            observers: [],
            timeouts: [],
            intervals: [],
            
            // Add observer to tracking
            addObserver: function(observer, target, options) {
                this.observers.push({
                    observer: observer,
                    target: target,
                    options: options
                });
                observer.observe(target, options);
                return observer;
            },
            
            // Add timeout to tracking
            addTimeout: function(callback, delay) {
                const id = setTimeout(() => {
                    callback();
                    // Auto-remove from tracking once fired
                    this.removeTimeout(id);
                }, delay);
                this.timeouts.push(id);
                return id;
            },
            
            // Add interval to tracking
            addInterval: function(callback, delay) {
                const id = setInterval(callback, delay);
                this.intervals.push(id);
                return id;
            },
            
            // Remove observer from tracking and disconnect
            removeObserver: function(observer) {
                const index = this.observers.findIndex(o => o.observer === observer);
                if (index !== -1) {
                    observer.disconnect();
                    this.observers.splice(index, 1);
                    return true;
                }
                return false;
            },
            
            // Remove timeout from tracking
            removeTimeout: function(id) {
                const index = this.timeouts.indexOf(id);
                if (index !== -1) {
                    clearTimeout(id);
                    this.timeouts.splice(index, 1);
                    return true;
                }
                return false;
            },
            
            // Remove interval from tracking
            removeInterval: function(id) {
                const index = this.intervals.indexOf(id);
                if (index !== -1) {
                    clearInterval(id);
                    this.intervals.splice(index, 1);
                    return true;
                }
                return false;
            },
            
            // Clean up all tracked resources
            cleanupAll: function() {
                // Disconnect all observers
                this.observers.forEach(o => {
                    if (o.observer && typeof o.observer.disconnect === 'function') {
                        o.observer.disconnect();
                    }
                });
                this.observers = [];
                
                // Clear all timeouts
                this.timeouts.forEach(id => clearTimeout(id));
                this.timeouts = [];
                
                // Clear all intervals
                this.intervals.forEach(id => clearInterval(id));
                this.intervals = [];
                
                console.log('All observers, timeouts, and intervals cleaned up');
            },
            
            // Clean up resources for elements no longer in DOM
            cleanupDetachedElements: function() {
                this.observers = this.observers.filter(o => {
                    if (!document.contains(o.target)) {
                        o.observer.disconnect();
                        return false; // Remove from array
                    }
                    return true; // Keep in array
                });
                
                console.log('Cleaned up observers for detached elements');
            }
        };
        
        // Set up periodic cleanup and page unload cleanup
        document.addEventListener('DOMContentLoaded', function() {
            // Periodically clean up observers for detached elements
            window.observerManager.addInterval(function() {
                window.observerManager.cleanupDetachedElements();
            }, 60000); // Check every minute
            
            // Clean up everything before page unload
            window.addEventListener('beforeunload', function() {
                window.observerManager.cleanupAll();
            });
        });
    </script>

    <!-- Script to clean up memory usage periodically -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Memory cleanup function
            function performMemoryCleanup() {
                console.log('Performing scheduled memory cleanup');
                
                // 1. Clean up all observers for detached elements
                window.observerManager.cleanupDetachedElements();
                
                // 2. Remove event listeners from detached elements (not directly possible in JS)
                // But we can force garbage collection if available
                if (window.gc) {
                    try {
                        window.gc();
                    } catch (e) {
                        console.log('Manual garbage collection not available');
                    }
                }
                
                // 3. Clean up any cached references
                if (window.memoryManager && typeof window.memoryManager.cleanupCache === 'function') {
                    window.memoryManager.cleanupCache();
                }
                
                // 4. Purge unused images from cache by setting src to empty and back
                const hiddenImages = Array.from(document.querySelectorAll('img'))
                    .filter(img => {
                        const rect = img.getBoundingClientRect();
                        // If image is far outside viewport
                        return (rect.bottom < -1000 || 
                                rect.top > window.innerHeight + 1000);
                    });
                
                hiddenImages.forEach(img => {
                    if (!img.dataset.originalSrc) {
                        img.dataset.originalSrc = img.src;
                        img.src = '';
                        // Mark for restoration when scrolled into view
                        img.classList.add('memory-optimized');
                    }
                });
                
                // 5. Check for and restore images that are now visible
                const visibleOptimizedImages = Array.from(document.querySelectorAll('img.memory-optimized'))
                    .filter(img => {
                        const rect = img.getBoundingClientRect();
                        return (rect.bottom > -200 && 
                                rect.top < window.innerHeight + 200);
                    });
                
                visibleOptimizedImages.forEach(img => {
                    if (img.dataset.originalSrc) {
                        img.src = img.dataset.originalSrc;
                        img.classList.remove('memory-optimized');
                    }
                });
                
                // Log cleanup complete
                console.log(`Memory cleanup complete. ${hiddenImages.length} images optimized, ${visibleOptimizedImages.length} images restored`);
            }
            
            // Set up periodic memory cleanup
            window.observerManager.addInterval(performMemoryCleanup, 120000); // Every 2 minutes
            
            // Also perform cleanup when tab becomes visible again
            document.addEventListener('visibilitychange', function() {
                if (document.visibilityState === 'visible') {
                    performMemoryCleanup();
                }
            });
            
            // Trigger initial cleanup after page is fully loaded
            window.addEventListener('load', function() {
                // Wait a short time after load to ensure everything is stable
                window.observerManager.addTimeout(performMemoryCleanup, 10000);
            });
        });
    </script>
</body>
</html> 